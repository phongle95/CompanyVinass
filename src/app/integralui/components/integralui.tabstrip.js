/*
  filename: integralui.tabstrip.js
  version : 1.4.0
  Copyright Â© 2016-2018 Lidor Systems. All rights reserved.

  This file is part of the "IntegralUI Web" Library. 
                                                                   
  The contents of this file are subject to the IntegralUI Web License, and may not be used except in compliance with the License.
  A copy of the License should have been installed in the product's root installation directory or it can be found at
  http://www.lidorsystems.com/products/web/studio/license-agreement.aspx.
                                                            
  This SOFTWARE is provided "AS IS", WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License for the specific language 
  governing rights and limitations under the License. Any infringement will be prosecuted under applicable laws.                           
*/
var __extends=this&&this.__extends||function(g,c){function a(){this.constructor=g}for(var b in c)c.hasOwnProperty(b)&&(g[b]=c[b]);g.prototype=null===c?Object.create(c):(a.prototype=c.prototype,new a)},__decorate=this&&this.__decorate||function(g,c,a,b){var e=arguments.length,f=3>e?c:null===b?b=Object.getOwnPropertyDescriptor(c,a):b,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)f=Reflect.decorate(g,c,a,b);else for(var m=g.length-1;0<=m;m--)if(k=g[m])f=(3>e?k(f):3<e?k(c,a,f):
k(c,a))||f;return 3<e&&f&&Object.defineProperty(c,a,f),f},__metadata=this&&this.__metadata||function(g,c){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(g,c)},core_1=require("@angular/core"),integralui_core_1=require("./integralui.core"),integralui_common_service_1=require("../services/integralui.common.service"),integralui_data_service_1=require("../services/integralui.data.service"),integralui_tab_1=require("./integralui.tab"),IntegralUITabStrip=function(g){function c(a,
b,c,f,k,m){var d=g.call(this,f)||this;d.dataService=a;d.elemRef=b;d.elemRenderer=c;d.commonService=f;d.cmpResolver=k;d.baseService=m;d.dataTabs=[];d.eventList=[];d.numTabs=0;d.autoSizeValue=!1;d.currentTabPlacement=integralui_core_1.IntegralUITabStripPlacement.Top;d.blockPos={top:"0",right:"auto",bottom:"auto",left:"0"};d.tabSize={width:0,height:0};d.currentSelection=null;d.currentSelectedIndex=-1;d.selectedComponent=null;d.prevComponent=null;d.removeIndex=-1;d.trialRef=null;d.tabSpacing=0;d.afterSelect=
new core_1.EventEmitter;d.beforeSelect=new core_1.EventEmitter;d.tabAdding=new core_1.EventEmitter;d.tabAdded=new core_1.EventEmitter;d.clear=new core_1.EventEmitter;d.tabRemoving=new core_1.EventEmitter;d.tabRemoved=new core_1.EventEmitter;d.selectionChanged=new core_1.EventEmitter;d.tabList=[];return d}__extends(c,g);Object.defineProperty(c.prototype,"autoSize",{get:function(){return this.autoSizeValue},set:function(a){this.autoSizeValue!=a&&(this.autoSizeValue=a,this.updateLayout())},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"selectedIndex",{get:function(){return this.currentSelectedIndex},set:function(a){this.currentSelectedIndex!=a&&(this.currentSelectedIndex=a,this.selectComponentByIndex(a))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"selectedTab",{get:function(){return this.currentSelection},set:function(a){this.currentSelection!=a&&(this.currentSelection=a,this.selectTab(a))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"tabs",{get:function(){return this.dataTabs},set:function(a){this.dataTabs=a;this.updateData();var b=this;setTimeout(function(){b.tabList=b.contentList.toArray();b.numTabs=b.tabList.length;0<b.numTabs&&(0<=b.selectedIndex?b.selectComponentByIndex(b.selectedIndex):b.selectedTab&&b.tabs?b.selectComponentByIndex(b.tabs.indexOf(b.selectedTab)):b.selectComponentByIndex(0));b.updateLayout()},100)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"tabStripPlacement",{get:function(){return this.currentTabPlacement},
set:function(a){this.currentTabPlacement!=a&&(this.currentTabPlacement=a,this.updateLayout())},enumerable:!0,configurable:!0});c.prototype.ngOnInit=function(){this.baseService.setComponent(this);this.updateData();this.generalClassName="iui-tabstrip";this.tabHeaderClassName="iui-tab-header";this.initStyle()};c.prototype.updateData=function(){this.dataService.init([{data:this.tabs}])};c.prototype.ngAfterViewInit=function(){var a=this,b=setTimeout(function(){var c=a.cmpResolver.resolveComponentFactory(integralui_core_1.IntegralUITComponent);
c&&a.tabBlockRef&&(a.trialRef=a.tabBlockRef.createComponent(c));clearTimeout(b)},100)};c.prototype.ngAfterContentInit=function(){};c.prototype.ngOnDestroy=function(){this.trialRef&&this.trialRef.destroy()};c.prototype.addTab=function(a){this.callEventAdd("add",a)};c.prototype.clearTabs=function(){this.dataService.clear();this.clear.emit(null)};c.prototype.insertTabAt=function(a,b){this.callEventAdd("at",a,b)};c.prototype.insertTabBefore=function(a,b){this.callEventAdd("ref",a,-1,b)};c.prototype.insertTabAfter=
function(a,b){this.callEventAdd("ref",a,-1,b,!0)};c.prototype.removeTab=function(a){this.callEventRemove(a)};c.prototype.removeTabAt=function(a){this.tabs&&0<=a&&a<this.tabs.length&&this.callEventRemove(this.tabs[a])};c.prototype.callEventAdd=function(a,b,c,f,k){var e={cancel:!1,tab:b};this.tabAdding.emit(e);if(1!=e.cancel){switch(a){case "at":this.dataService.insert(b,c);break;case "ref":this.dataService.insertByRef(b,f,k);break;default:this.dataService.insert(b)}this.tabAdded.emit({tab:b});this.selectedComponent||
this.selectComponentByIndex(0)}};c.prototype.callEventRemove=function(a){var b={cancel:!1,tab:a};this.tabRemoving.emit(b);1!=b.cancel&&(this.removeIndex=this.tabs?this.tabs.indexOf(a):-1,this.dataService.removeAt(a),this.tabRemoved.emit({tab:a}))};c.prototype.attachTabEvents=function(){};c.prototype.getTabCurrentIndex=function(a){this.tabList=this.contentList.toArray();return a&&this.tabList?this.tabList.indexOf(a):-1};c.prototype.getTabDataIndex=function(a){return a&&(a=this.getTabCurrentIndex(a),
this.tabs&&0<=a&&a<this.tabs.length)?a:-1};c.prototype.getTabData=function(a){return this.tabs&&0<=a&&a<this.tabs.length?this.tabs[a]:null};c.prototype.getTabIndex=function(a){return a&&this.tabs?this.tabs.indexOf(a):-1};c.prototype.getComponentData=function(a){if(a){if(a.data)return a.data;a=this.getTabDataIndex(a);if(this.tabs&&0<=a&&a<this.tabs.length)return this.tabs[a]}return null};c.prototype.isIndexInRange=function(a){this.contentList&&(this.tabList=this.contentList.toArray());return this.tabList?
0<=a&&a<this.tabList.length:!1};c.prototype.updateLayout=function(){this.updateTabLayout()};c.prototype.updateTabLayout=function(){var a=this,b=setTimeout(function(){a.tabList=a.contentList.toArray();if(a.tabHeaders){var c=0,f=0,k=0,g=0,d={top:0,left:0},l={width:0,height:0};a.tabSize={width:0,height:0};var n=a.tabHeaders.toArray();if(n&&0<n.length){n.forEach(function(b,d){k=b.nativeElement.offsetWidth;g=b.nativeElement.offsetHeight;var e=a.commonService.getPadding(b.nativeElement);switch(a.currentTabPlacement){case integralui_core_1.IntegralUITabStripPlacement.Right:a.blockPos=
{top:"0",right:"0",bottom:"auto",left:"auto"};a.elemRenderer.setElementStyle(b.nativeElement,"top",f+"px");a.elemRenderer.setElementStyle(b.nativeElement,"right","0");a.elemRenderer.setElementStyle(b.nativeElement,"bottom","auto");a.elemRenderer.setElementStyle(b.nativeElement,"left","auto");a.tabSize.width<k&&(a.tabSize.width=k-(e.left+e.right)-1);break;case integralui_core_1.IntegralUITabStripPlacement.Bottom:a.blockPos={top:"auto",right:"auto",bottom:"0",left:"0"};a.elemRenderer.setElementStyle(b.nativeElement,
"top","auto");a.elemRenderer.setElementStyle(b.nativeElement,"right","auto");a.elemRenderer.setElementStyle(b.nativeElement,"bottom","0");a.elemRenderer.setElementStyle(b.nativeElement,"left",c+"px");a.tabSize.height<g&&(a.tabSize.height=g-(e.top+e.bottom));break;case integralui_core_1.IntegralUITabStripPlacement.Left:a.blockPos={top:"0",right:"auto",bottom:"auto",left:"0"};a.elemRenderer.setElementStyle(b.nativeElement,"top",f+"px");a.elemRenderer.setElementStyle(b.nativeElement,"right","auto");
a.elemRenderer.setElementStyle(b.nativeElement,"bottom","auto");a.elemRenderer.setElementStyle(b.nativeElement,"left","0");a.tabSize.width<k&&(a.tabSize.width=k-(e.left+e.right)-1);break;default:a.blockPos={top:"0",right:"auto",bottom:"auto",left:"0"},a.elemRenderer.setElementStyle(b.nativeElement,"top","0"),a.elemRenderer.setElementStyle(b.nativeElement,"right","auto"),a.elemRenderer.setElementStyle(b.nativeElement,"bottom","auto"),a.elemRenderer.setElementStyle(b.nativeElement,"left",c+"px"),a.tabSize.height<
g&&(a.tabSize.height=g)}e=a.tabSpacing;c+=k+e-1;f+=g+e-1});var h=a.commonService.getBorderWidth(a.elemRef.nativeElement.children[0]);n.forEach(function(b,c){var e=a.commonService.getPadding(b.nativeElement);switch(a.currentTabPlacement){case integralui_core_1.IntegralUITabStripPlacement.Right:a.elemRenderer.setElementStyle(b.nativeElement,"width",a.tabSize.width+"px");d={top:0,left:0};l={width:a.elemRef.nativeElement.children[0].clientWidth-(h.left+h.right-1)-a.tabSize.width-(e.left+e.right)-2,height:a.elemRef.nativeElement.children[0].clientHeight-
(h.top+h.bottom)};break;case integralui_core_1.IntegralUITabStripPlacement.Bottom:a.elemRenderer.setElementStyle(b.nativeElement,"height",a.tabSize.height+"px");d={top:0,left:0};l={width:a.elemRef.nativeElement.children[0].clientWidth-(h.left+h.right),height:a.elemRef.nativeElement.children[0].clientHeight-a.tabSize.height-(e.top+e.bottom)-2-(h.top+h.bottom-1)};break;case integralui_core_1.IntegralUITabStripPlacement.Left:a.elemRenderer.setElementStyle(b.nativeElement,"width",a.tabSize.width+"px");
d={top:0,left:a.tabSize.width+(e.left+e.right)+1};l={width:a.elemRef.nativeElement.children[0].clientWidth-(h.left+h.right-1)-a.tabSize.width-(e.left+e.right)-2,height:a.elemRef.nativeElement.children[0].clientHeight-(h.top+h.bottom)};break;default:d={top:a.tabSize.height-1,left:0},l={width:a.elemRef.nativeElement.children[0].clientWidth-(h.left+h.right),height:a.elemRef.nativeElement.children[0].clientHeight-a.tabSize.height-(h.top+h.bottom-1)},a.autoSizeValue&&(l.height="auto")}})}a.tabList&&0<
a.tabList.length&&a.tabList.forEach(function(a){a.updateLayout(d,l)})}clearTimeout(b)},1)};c.prototype.tabClicked=function(a,b){this.isEnabled&&this.selectComponent(b)};c.prototype.tabEnter=function(a,b){this.isEnabled&&!b.selected&&(b.state|=integralui_core_1.IntegralUIObjectState.hovered)};c.prototype.tabLeave=function(a,b){b.state&=~integralui_core_1.IntegralUIObjectState.hovered};c.prototype.clearSelection=function(a){this.tabList=this.contentList.toArray();this.tabList.forEach(function(b,c){b!=
a&&(b.selected=!1)})};c.prototype.selectComponent=function(a){if(a&&a!=this.selectedComponent){var b=this.getTabCurrentIndex(a),c=this.getComponentData(a),f={cancel:!1,index:b,tab:c};this.beforeSelect.emit(f);if(1!=f.cancel)return this.currentSelectedIndex=b,this.tabs&&0<=b&&b<this.tabs.length&&(this.currentSelection=this.tabs[b]),this.prevComponent=this.selectedComponent,this.selectedComponent=a,this.clearSelection(a),a.selected=!0,this.afterSelect.emit({index:b,tab:c}),this.selectionChanged.emit({index:b,
tab:c}),!0}return!1};c.prototype.selectComponentByIndex=function(a){this.isIndexInRange(a)&&this.selectComponent(this.tabList[a])};c.prototype.selectTab=function(a){this.tabs&&(this.currentSelectedIndex=this.tabs.indexOf(a),this.selectComponentByIndex(this.currentSelectedIndex))};c.prototype.getTabHeaderClass=function(a){var b=a.getCurrentTabStyle(),c=b.header.normal;if(a.state&integralui_core_1.IntegralUIObjectState.disabled)c+=" "+b.header.disabled;else if(a.state&integralui_core_1.IntegralUIObjectState.focused)c+=
" "+b.header.focused;else if(a.state&integralui_core_1.IntegralUIObjectState.selected)switch(c+=" "+b.header.selected,this.currentTabPlacement){case integralui_core_1.IntegralUITabStripPlacement.Right:c+=" iui-tab-selected-right";break;case integralui_core_1.IntegralUITabStripPlacement.Bottom:c+=" iui-tab-selected-bottom";break;case integralui_core_1.IntegralUITabStripPlacement.Left:c+=" iui-tab-selected-left";break;default:c+=" iui-tab-selected-top"}else a.state&integralui_core_1.IntegralUIObjectState.hovered&&
(c+=" "+b.header.hovered);return c};c.prototype.tabTouchStart=function(a,b){this.isEnabled&&this.selectComponent(b)};return c}(integralui_core_1.IntegralUIBaseComponent);__decorate([core_1.ContentChildren(integralui_tab_1.IntegralUITab),__metadata("design:type",core_1.QueryList)],IntegralUITabStrip.prototype,"contentList",void 0);__decorate([core_1.ViewChild("tabBlock"),__metadata("design:type",core_1.ElementRef)],IntegralUITabStrip.prototype,"tabBlock",void 0);
__decorate([core_1.ViewChild("tabBlock",{read:core_1.ViewContainerRef}),__metadata("design:type",core_1.ViewContainerRef)],IntegralUITabStrip.prototype,"tabBlockRef",void 0);__decorate([core_1.ViewChildren("tabHeader"),__metadata("design:type",core_1.QueryList)],IntegralUITabStrip.prototype,"tabHeaders",void 0);__decorate([core_1.Input(),__metadata("design:type",Boolean),__metadata("design:paramtypes",[Boolean])],IntegralUITabStrip.prototype,"autoSize",null);
__decorate([core_1.Input(),__metadata("design:type",Number)],IntegralUITabStrip.prototype,"tabSpacing",void 0);__decorate([core_1.Input(),__metadata("design:type",Number),__metadata("design:paramtypes",[Number])],IntegralUITabStrip.prototype,"selectedIndex",null);__decorate([core_1.Input(),__metadata("design:type",Object),__metadata("design:paramtypes",[Object])],IntegralUITabStrip.prototype,"selectedTab",null);
__decorate([core_1.Input(),__metadata("design:type",Array),__metadata("design:paramtypes",[Array])],IntegralUITabStrip.prototype,"tabs",null);__decorate([core_1.Input(),__metadata("design:type",Number),__metadata("design:paramtypes",[Number])],IntegralUITabStrip.prototype,"tabStripPlacement",null);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],IntegralUITabStrip.prototype,"afterSelect",void 0);
__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],IntegralUITabStrip.prototype,"beforeSelect",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],IntegralUITabStrip.prototype,"tabAdding",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],IntegralUITabStrip.prototype,"tabAdded",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],IntegralUITabStrip.prototype,"clear",void 0);
__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],IntegralUITabStrip.prototype,"tabRemoving",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],IntegralUITabStrip.prototype,"tabRemoved",void 0);__decorate([core_1.Output(),__metadata("design:type",core_1.EventEmitter)],IntegralUITabStrip.prototype,"selectionChanged",void 0);
IntegralUITabStrip=__decorate([core_1.Component({selector:"iui-tabstrip",template:'\n\t\t<div [ngClass]="getControlClass()">\n\t\t\t<ul [ngStyle]="{ \'top\': blockPos.top , \'right\': blockPos.right, \'bottom\': blockPos.bottom, \'left\': blockPos.left }" #tabBlock>\n\t\t\t\t<li *ngFor="let tab of tabList" (mouseenter)="tabEnter($event, tab)" (mouseleave)="tabLeave($event, tab)" (mousedown)="tabClicked($event, tab)" (touchstart)="tabTouchStart($event, tab)"  [ngClass]="getTabHeaderClass(tab)" [ngStyle]="{ \'z-index\': tab.elemOrder }" #tabHeader>\n\t\t\t\t\t<span *ngIf="tab.icon" [ngClass]="tab.icon"></span>\n\t\t\t\t    <span *ngIf="tab.text" class="iui-tab-label">{{tab.text}}</span>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<ng-content></ng-content>\n\t\t</div>\n\t',inputs:["controlStyle",
"data","enabled","name","state"],providers:[integralui_core_1.IntegralUIBaseService,integralui_data_service_1.IntegralUIDataService],encapsulation:core_1.ViewEncapsulation.None}),__metadata("design:paramtypes",[integralui_data_service_1.IntegralUIDataService,core_1.ElementRef,core_1.Renderer,integralui_common_service_1.IntegralUICommonService,core_1.ComponentFactoryResolver,integralui_core_1.IntegralUIBaseService])],IntegralUITabStrip);exports.IntegralUITabStrip=IntegralUITabStrip;